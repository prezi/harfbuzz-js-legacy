package prezi.text.otf;

import massive.munit.Assert;

class OtfCrialBlackOtfTest extends FontTestBase
{
	override private function fontName():String
	{
		return "Crial-Black.otf";
	}

	@Test
	public function testFontHeader()
	{
		assertFontProperties({
			"tag": OtfFont.TAG_CODE_OTTO,
			"ttfScale": 1,
			"ascent": 965,
			"descent": -235,
			"lineGap": 0,
			"unitsPerEm": 1000,
			"underlinePosition": -75,
			"underlineThickness": 50,
			"numberOfHMetrics": 176,
		});
	}

	@Test
	public function testGlyphCodeOfLowercaseP()
	{
		return;
		var glyphCode = font.unicodeToGlyphCode("p".code);
		assertThat(glyphCode, is(81));
	}

	@Test
	public function testLoadLowercaseNGlyph()
	{
		var glyphCode = font.unicodeToGlyphCode("n".code);
		var outline = font.glyphOutline(glyphCode);
		assertThat("outline", outline, is([1,1,558,370,4,557,426,547,473,529,510,4,502,565,460,592,403,590,4,396,590,379,594,376,594,4,361,594,342,590,319,583,4,300,577,282,571,264,564,4,260,564,241,552,238,552,4,234,552,233,553,234,554,4,233,562,238,582,238,586,4,238,593,233,596,222,596,4,221,596,214,595,203,594,2,185,592,4,183,592,175,593,162,594,2,139,596,4,51,554,7,525,7,510,4,7,507,12,502,23,495,2,23,13,4,23,1,49,-8,65,-8,4,80,-8,116,-1,131,-1,4,134,-1,138,-6,142,-6,4,149,-6,163,4,185,23,4,204,40,215,51,218,55,4,223,62,226,72,226,83,4,226,94,221,123,221,132,4,226,191,229,235,231,264,4,232,284,232,299,231,308,4,232,327,234,345,235,364,4,239,387,250,406,267,422,4,328,425,358,369,358,255,2,358,201,4,358,200,359,175,362,126,4,363,95,362,63,358,31,4,357,20,362,-3,370,-3,2,389,-3,4,393,-3,423,4,432,5,4,479,9,504,13,507,18,4,509,25,510,31,510,35,4,516,41,521,45,524,48,4,551,81,565,101,565,106,1,490,134,2,481,39,4,442,31,418,27,409,28,2,391,28,4,391,32,389,45,389,49,2,389,174,4,388,185,388,199,388,217,2,388,252,4,388,314,382,359,369,386,4,349,428,310,449,253,449,4,225,449,188,421,171,385,4,164,370,158,349,154,321,4,152,298,150,276,147,253,4,142,188,140,139,139,106,4,135,59,133,32,133,23,4,122,20,105,19,83,19,4,77,19,65,23,47,30,4,47,43,45,70,45,83,2,45,432,4,45,464,46,486,48,498,4,47,498,66,502,105,509,4,109,509,124,517,128,517,2,139,517,4,140,514,140,511,141,508,2,141,476,4,142,463,147,457,158,457,4,165,457,170,459,173,462,4,217,515,268,541,326,541,4,369,541,410,523,449,486,4,458,470,463,457,466,446,4,476,418,482,399,483,390,4,484,370,484,355,484,344,4,484,336,490,315,490,311]));
	}

	@Test
	public function testLoadUppercaseTGlyph()
	{
		var glyphCode = font.unicodeToGlyphCode("T".code);
		var outline = font.glyphOutline(glyphCode);
		assertThat("outline", outline, is([1,1,701,755,4,701,777,701,789,700,792,4,697,806,692,814,686,815,4,665,818,637,820,604,820,2,453,810,2,311,796,2,307,798,2,86,795,4,75,795,60,785,41,766,4,29,754,17,742,6,729,4,9,720,12,714,14,710,4,16,676,18,648,21,627,2,24,597,4,26,585,29,578,34,575,2,62,575,2,164,582,4,179,582,194,579,208,573,4,220,572,229,572,236,573,2,241,229,2,224,2,4,224,-10,238,-16,267,-16,4,320,-16,364,-10,397,3,4,412,8,426,18,440,32,4,454,46,467,55,480,59,4,482,62,483,66,483,71,2,472,240,2,472,493,4,472,521,476,553,483,589,4,501,590,529,592,568,595,2,622,600,4,627,600,632,596,635,596,4,640,596,645,598,650,601,4,687,634,706,652,706,657,4,706,661,701,679,701,682,1,620,624,4,570,619,531,615,503,613,4,484,612,465,612,446,612,4,429,611,410,606,388,597,4,383,595,381,591,380,585,4,380,577,384,556,384,553,2,384,483,4,384,481,384,472,385,455,4,386,439,386,430,386,428,2,386,367,2,370,191,2,370,112,4,370,85,368,55,363,24,4,328,15,305,11,294,12,2,261,12,2,274,224,2,265,409,4,265,412,265,422,266,439,4,267,460,268,481,268,502,4,268,556,267,588,266,597,4,257,599,241,600,216,600,4,215,600,211,605,206,605,2,53,600,4,48,642,46,663,46,664,2,46,720,4,49,717,58,716,73,717,4,96,720,106,721,105,721,4,110,721,123,718,128,718,4,129,718,151,715,160,715,4,165,715,173,715,184,716,2,366,716,4,369,716,395,721,399,721,4,401,721,415,720,440,718,2,481,716,4,510,716,534,718,553,722,4,576,727,593,729,603,730,4,614,680,620,648,620,634]));
	}

	@Test
	public function testAdvanceWidthOfLowercaseP()
	{
		var glyphCode = font.unicodeToGlyphCode("p".code);
		var advanceWidth = font.advanceWidth(glyphCode);
		assertThat("advanceWidth", advanceWidth, is(592));
	}
}
